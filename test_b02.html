<!DOCTYPE html>
<html>

<body>

    <p>Click the button to make a new page with text.</p>

    <button onclick="newPage()">Create a new page</button>
    <button onclick="addText()">scroll</button>

    <script src="bible.js"></script>
    <script src="bible_tool.js"></script>
    <script>
        // 這個網頁含有中文

        // a handle of the new window that othe functions can operate
        var myNewWindow
        // auto close new window
        window.addEventListener("beforeunload", function (e) {
            // Do something
            myNewWindow.close()
        }, false);

        // test data
        let b = 1
        let c = 2
        let v = 10

        function newPage() {
            myNewWindow = window.open("", "", "width=400,height=400") // open a new window, specify size to make a mini window
            let verses = get_verses_chapter(b, c)
            for (let i = 0; i < verses.length; i++) {
                let aPieceOfText = document.createElement("div")
                aPieceOfText.innerHTML = (i + 1) + verses[i][2] + '<br>' + (i + 1) + verses[i][0]
                aPieceOfText.id = "" + (i + 1)
                myNewWindow.document.body.appendChild(aPieceOfText);
            }
        }

        function addText() {
            // only work for chrome
            // https://stackoverflow.com/a/49842367/7037749
            var testDiv = myNewWindow.document.getElementById("" + v);
            const y = testDiv.getBoundingClientRect().top + myNewWindow.scrollY;
            myNewWindow.scroll({
                top: y,
                behavior: 'smooth'
            });
        }

        function cleanText() {
            myNewWindow.document.body.innerHTML = '';
            var aPieceOfText = document.createElement("H1");
            aPieceOfText.innerHTML = "This is a new page";
            myNewWindow.document.body.appendChild(aPieceOfText);
        }


    </script>

</body>

</html>